buildscript {
    dependencies {
        classpath (group: 'de.interactive_instruments', name: 'xtraplatform-modules', version: '4.0.0-SNAPSHOT') {
            changing = true
        }
    }
    configurations.all {
        resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
    }
}

plugins {
    //id 'de.interactive_instruments.xtraplatform-feature' version '4.0.0-SNAPSHOT'
    id "com.diffplug.spotless" version "5.1.2" apply false
    //id 'com.github.hierynomus.license-report' version '0.15.0' apply false
}

apply plugin: 'de.interactive_instruments.xtraplatform-feature'

allprojects {
    group = 'de.interactive_instruments'
}

ext {
    versionSuffix = (project.hasProperty('branch') && project.getProperty('branch') != 'master' ? ('-' + project.getProperty('branch')) : '') + (project.findProperty('snapshot') == 'true' ? '-SNAPSHOT' : '')
}

version = '5.0.0' + versionSuffix

dependencies {
    bundle subprojects
}

//TODO: would this be needed for all embedded libs?
if (gradle.isIncluded) {
  allprojects {
    repositories {
      mavenLocal()
    }
  }
  dependencies {
    bundle group: group, name: 'xtraplatform-runtime', version: version += version.endsWith('-SNAPSHOT') ? '' : '-SNAPSHOT'
  }
}


apply from: '../immutables.gradle'

apply from: '../formatting.gradle'

/*
apply from: '../license-report.gradle'

*/
apply from: '../composite-tasks.gradle'
