(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{548:function(e,t,i){Promise.resolve().then(i.bind(i,4228))},4228:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return I}});var s=i(3827),l=i(5815),a=i(4747),n=i(6311),r=i(9084),o=i(4090);let c="bits",d="bytes",u="jedec",m={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function h(e){let{name:t,version:i,uptime:l,memory:a,health:o,Icon:h,IconFooter1:g,IconFooter2:x,IconFooter3:p}=e,b=function(e){let{bits:t=!1,pad:i=!1,base:s=-1,round:l=2,locale:a="",localeOptions:n={},separator:r="",spacer:o=" ",symbols:h={},standard:g="",output:x="string",fullform:p=!1,fullforms:b=[],exponent:f=-1,roundingMethod:y="round",precision:j=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=f,w=Number(e),N=[],E=0,S="";"si"===g?(s=10,g=u):"iec"===g||g===u?s=2:2===s?g="iec":(s=10,g=u);let B=10===s?1e3:1024,I=w<0,L=Math[y];if("bigint"!=typeof e&&isNaN(e))throw TypeError("Invalid number");if("function"!=typeof L)throw TypeError("Invalid rounding method");if(I&&(w=-w),(-1===v||isNaN(v))&&(v=Math.floor(Math.log(w)/Math.log(B)))<0&&(v=0),v>8&&(j>0&&(j+=8-v),v=8),"exponent"===x)return v;if(0===w)N[0]=0,S=N[1]=m.symbol[g][t?c:d][v];else{E=w/(2===s?Math.pow(2,10*v):Math.pow(1e3,v)),t&&(E*=8)>=B&&v<8&&(E/=B,v++);let e=Math.pow(10,v>0?l:0);N[0]=L(E*e)/e,N[0]===B&&v<8&&-1===f&&(N[0]=1,v++),S=N[1]=10===s&&1===v?t?"kbit":"kB":m.symbol[g][t?c:d][v]}if(I&&(N[0]=-N[0]),j>0&&(N[0]=N[0].toPrecision(j)),N[1]=h[N[1]]||N[1],!0===a?N[0]=N[0].toLocaleString():a.length>0?N[0]=N[0].toLocaleString(a,n):r.length>0&&(N[0]=N[0].toString().replace(".",r)),i&&!1===Number.isInteger(N[0])&&l>0){let e=r||".",t=N[0].toString().split(e),i=t[1]||"",s=i.length;N[0]="".concat(t[0]).concat(e).concat(i.padEnd(s+(l-s),"0"))}return!0===p&&(N[1]=b[v]?b[v]:m.fullform[g][v]+(t?"bit":"byte")+(1===N[0]?"":"s")),"array"===x?N:"object"===x?{value:N[0],symbol:N[1],exponent:v,unit:S}:N.join(o)}(a,{base:10}),f=(0,n.Z)(l,{secondsDecimalDigits:0});return(0,s.jsxs)(r.Zb,{className:"shadow-lg",children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-semibold ".concat("ACTIVE"===o||"true"===o||"HEALTHY"===o?"text-success":"text-destructive"),children:o}),h?(0,s.jsx)(h,{className:"h-4 w-4 text-muted-foreground"}):null]}),(0,s.jsxs)(r.aY,{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold break-normal",style:{marginBottom:"3px"},children:t}),(0,s.jsxs)("div",{style:{marginRight:"225px",marginTop:"-30px"},children:[(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[p?(0,s.jsx)(p,{className:"h-4 w-4 text-muted-foreground",style:{marginRight:"5px",marginTop:"2px"}}):null,(0,s.jsx)("span",{style:{color:"dimgray",width:"65px",fontSize:"14px",fontWeight:"bold"},children:"Version:"}),(0,s.jsx)("span",{style:{color:"dimgray",fontSize:"14px",fontWeight:"bold"},children:i})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[g?(0,s.jsx)(g,{className:"h-4 w-4 text-muted-foreground",style:{marginRight:"5px",marginTop:"2px"}}):null,(0,s.jsx)("span",{style:{color:"dimgray",width:"65px",fontSize:"14px",fontWeight:"bold"},children:"Uptime:"}),(0,s.jsx)("span",{style:{color:"dimgray",fontSize:"14px",fontWeight:"bold"},children:-1===l?"":f})]}),(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[x?(0,s.jsx)(x,{className:"h-4 w-4 text-muted-foreground",style:{marginRight:"5px",marginTop:"2px"}}):null,(0,s.jsx)("span",{style:{color:"dimgray",width:"65px",fontSize:"14px",fontWeight:"bold"},children:"Memory:"}),(0,s.jsx)("span",{style:{color:"dimgray",fontSize:"14px",fontWeight:"bold"},children:-1===a?"":b})]})]})]})]})}var g=i(4922),x=i(9539),p=i.n(x),b=i(5744),f=i(2169),y=i(3702),j=i(594),v=i(6162),w=i(6054),N=i.n(w);i(1209),i(7613);var E=i(7907),S=i(7780),B=i(8403);function I(){let[e,t]=(0,o.useState)([]),[i,n]=(0,o.useState)("overview"),[r,c]=(0,o.useState)([]),[d,u]=(0,o.useState)({uptime:-1,memory:-1}),[m,x]=(0,o.useState)([]),[w,I]=(0,o.useState)({name:"",version:"",url:"",env:"",status:""}),[L,k]=(0,o.useState)([]),[A,T]=(0,o.useState)([]),[M,P]=(0,o.useState)(!0),[z,H]=(0,o.useState)({}),[Z,U]=(0,o.useState)(!1),Y=(0,E.useRouter)(),C=(0,E.usePathname)(),[V,D]=(0,o.useState)([{name:"",url:""}]),[O,W]=(0,o.useState)("");(0,o.useEffect)(()=>{T(e.filter(e=>e.name.startsWith("app/")&&"app/store/values2"!==e.name).map(e=>({label:e.name.substring(4),status:e.state,checked:p()(e.timestamp).format("HH:mm:ss")})))},[e]);let _=async()=>{try{let e=await (0,f.C5)();I(e)}catch(e){console.error("Error loading info:",e)}},K=async()=>{try{let e=await (0,f.Kt)();u(e)}catch(e){console.error("Error loading metrics:",e)}},R=async()=>{try{let e=await (0,f.Ly)();x(e)}catch(e){console.error("Error loading jobs:",e)}},q=async()=>{try{let e=await (0,f.fi)(),t=await (0,f.fL)();e.forEach(e=>{let i=t.find(t=>t.name==="entities/".concat(e.type,"/").concat(e.id));e.status=i&&i.state?i.state:"UNKNOWN"}),c(e)}catch(e){console.error("Error loading entities:",e)}},F=async()=>{try{let e=await (0,f.fL)();t(e)}catch(e){console.error("Error loading health checks:",e)}},G=async()=>{try{let e=await (0,f.KX)();k(e)}catch(e){console.error("Error loading health values:",e)}};(0,o.useEffect)(()=>{C&&n(window.location.hash.slice(1)||"overview");let e=setInterval(()=>{F(),q(),_(),K(),R(),G()},v.gi);return()=>clearInterval(e)},[C]);let J=e.length>0?e.some(e=>"AVAILABLE"!==e.state)?"UNHEALTHY":"HEALTHY":"",X=A.length,Q=L.length;v.ke&&(console.log("Values:",Q),console.log("totalSources:",X),console.log("Jobs",m));let $=r.length,ee=(0,B.lY)(r),et=(0,B.Ph)(ee),ei=[];return m.length>0&&(ei=(0,f.b5)(m)),(0,s.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"Deployment"}),-1===d.uptime&&-1===d.memory&&(0,s.jsx)("div",{className:"ml-auto",children:(0,s.jsx)(S.Z,{color:"#123abc",loading:!0,size:20})})]}),(0,s.jsxs)(b.mQ,{value:i,onValueChange:e=>{n(e),Y.push("".concat(C,"#").concat(e))},className:"h-full space-y-6",children:[(0,s.jsx)("div",{className:"space-between flex items-center",children:(0,s.jsxs)(b.dr,{children:[(0,s.jsx)(b.SP,{value:"overview",children:(0,s.jsx)("span",{children:"Overview"})}),(0,s.jsx)(b.SP,{value:"store",children:(0,s.jsx)("span",{children:"Base Health"})}),(0,s.jsx)(b.SP,{value:"jobs",children:(0,s.jsx)("span",{children:"Jobs"})})]})}),(0,s.jsxs)(b.nU,{value:"overview",children:[(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-1 lg:grid-cols-1",style:{marginBottom:"10px"},children:(0,s.jsx)(h,{name:"".concat(w.url.replace("https://","").replace("http://","")).concat(O?" (".concat(O,")"):""),version:w.version,uptime:d.uptime,memory:d.memory,health:J,IconFooter1:(0,y.q)("Clock"),IconFooter2:(0,y.q)("Upload"),IconFooter3:(0,y.q)("Desktop")},"Entities")}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsx)(a.Z,{main:"Entities",route:"/entities",footer:et,total:$,Icon:(0,y.q)("Id")},"Entities"),(0,s.jsx)(a.Z,{main:"Values",route:"/values",footer:"\xa0",total:Q,Icon:(0,y.q)("Code")},"Values")]})]}),(0,s.jsx)(b.nU,{value:"store",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Health checks for global components that are used by all entities."}),(0,s.jsx)(j.w,{columns:l.z,data:A})]})}),(0,s.jsx)(b.nU,{value:"jobs",children:ei.length>0?ei.map(e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-1 lg:grid-cols-1",style:{marginBottom:"10px"},children:(0,s.jsx)(g.Z,{entity:e.entity,label:e.label,tilesets:e.details.tileSets,percent:e.percent,startedAt:e.startedAt,updatedAt:e.updatedAt,info:"".concat(e.current,"/").concat(e.total),id:e.id},e.id)}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"})]})):null}),(0,s.jsx)(b.nU,{value:"cfg",children:(0,s.jsx)("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"16px",border:"1px solid lightgray"},children:Z?"No results.":0===Object.keys(z).length?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(S.Z,{color:"#123abc",loading:!0,size:20}),(0,s.jsx)("span",{style:{marginLeft:"5px"},children:"Loading..."})]}):Object.entries(z).map(e=>{let[t,i]=e,l=JSON.stringify(i,null,2),a=N().highlight(l,N().languages.json,"json");return(0,s.jsxs)("div",{style:{display:"flex"},children:[(0,s.jsxs)("span",{children:[t,":"]}),(0,s.jsx)("pre",{dangerouslySetInnerHTML:{__html:a},style:{margin:"0 0 0 10px"}})]},t)})})})]})]})}},8403:function(e,t,i){"use strict";i.d(t,{Ph:function(){return r},RL:function(){return s},Xd:function(){return l},lY:function(){return a},zM:function(){return n}});let s=e=>"services"===e.type?"API":e.subType.split(/[/]/)[0],l=e=>e[0].toUpperCase()+e.substring(1)+"s",a=e=>e.reduce((e,t)=>(s(t),e||(e={available:0,limited:0,unavailable:0}),"AVAILABLE"===t.status?e.available++:"LIMITED"===t.status?e.limited++:"UNAVAILABLE"===t.status&&e.unavailable++,e),{available:0,limited:0,unavailable:0}),n=(e,t)=>t.reduce((t,i)=>(t[i]=a(e.filter(e=>s(e)===i)),t),{}),r=e=>{if(!e||!e)return"No entities found";let t="";return e.available&&(t+="".concat(e.available," available")),e.limited&&(t.length>0&&(t+=" "),t+="".concat(e.limited," limited")),e.unavailable&&(t.length>0&&(t+=" "),t+="".concat(e.unavailable," unavailable")),t}}},function(e){e.O(0,[310,658,792,594,788,267,758,617,913,971,69,744],function(){return e(e.s=548)}),_N_E=e.O()}]);