(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[58],{9476:function(e,s,t){Promise.resolve().then(t.bind(t,767))},767:function(e,s,t){"use strict";t.r(s);var n=t(3827),l=t(8886),a=t(2169),i=t(2177),c=t(7907),r=t(4090),o=t(6162),d=t(5815),u=t(1900),h=t(7780),x=t(5744),g=t(6054),m=t.n(g);function f(){let e=(0,c.useRouter)(),[s,t]=(0,r.useState)([]),[g,f]=(0,r.useState)(null),[j,p]=(0,r.useState)([]),[v,y]=(0,r.useState)({}),[b,N]=(0,r.useState)(!0),[w,k]=(0,r.useState)([]),[S,E]=(0,r.useState)("overview"),[C,H]=(0,r.useState)(!1),L="",D=(0,c.useSearchParams)();null!==D&&(L=D.get("id")),(0,r.useEffect)(()=>{if(j&&g){let e=j.filter(e=>e.name==="entities/".concat(g.type,"/").concat(g.id)).flatMap(e=>e.capabilities?e.capabilities.map(s=>({...s,components:e.components?e.components.filter(e=>e.capabilities.includes(s.name)).map(e=>({...e,capability:s.name,component:!0})):[]})):[]).map(e=>({label:e.name,status:e.healthy?"HEALTHY":"UNHEALTHY",checked:"",subRows:e.components.map(e=>({label:e.name,status:e.healthy?"HEALTHY":"UNHEALTHY",checked:""}))}));k(e),o.D&&console.log("myCheck:",e)}},[j,g]);let z=async()=>{try{let e=await (0,a.fL)();p(e)}catch(e){console.error("Error loading health checks:",e)}},_=async()=>{try{if(null!==L){let e=await (0,a.ZH)(L);"Method not allowed"===e.message?H(!0):y(e)}}catch(e){console.error("Error loading cfg:",e),H(!0)}},T=async()=>{try{let e=await (0,a.fi)();if(!e)return(0,c.notFound)();t(e);let s=e.find(e=>e.uid===L);f(s),o.D&&(console.log("newEntities",e),console.log("myEntity",s))}catch(e){console.error("Error loading entities:",e)}};return((0,r.useEffect)(()=>{(async()=>{await T(),await z(),await _(),N(!1),o.D&&(console.log("entities[id]",s),console.log("entity[id]",g),console.log("cfg",v))})()},[]),b)?(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(h.Z,{color:"#123abc",loading:!0,size:20}),(0,n.jsx)("span",{style:{marginLeft:"10px"},children:"Loading..."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("a",{onClick:()=>e.back(),className:"font-bold flex items-center cursor-pointer text-blue-500 hover:text-blue-400",children:(0,n.jsx)(i.wyc,{className:"mr-[-1px] h-6 w-6"})}),(0,n.jsx)("h2",{className:"text-2xl font-semibold tracking-tight ml-2",children:g?g.id:"Not Found..."})]}),(0,n.jsx)("div",{className:"p-8 pt-6",children:(0,n.jsxs)(l.z,{onClick:()=>{T(),z()},className:"font-bold",children:[(0,n.jsx)(i.BGW,{className:"mr-2 h-4 w-4"}),"Reload"]})})]}),(0,n.jsx)("div",{className:"p-8 pt-6",children:(0,n.jsxs)(x.mQ,{value:S,onValueChange:e=>{E(e)},className:"h-full space-y-6",children:[(0,n.jsx)("div",{className:"space-between flex items-center",children:(0,n.jsxs)(x.dr,{children:[(0,n.jsx)(x.SP,{value:"overview",children:(0,n.jsx)("span",{children:"Health"})}),(0,n.jsx)(x.SP,{value:"cfg",children:(0,n.jsx)("span",{children:"Configuration"})})]})}),(0,n.jsx)(x.nU,{value:"overview",children:(0,n.jsx)("div",{children:(0,n.jsx)(u.w,{columns:d.z,data:w})})}),(0,n.jsx)(x.nU,{value:"cfg",children:(0,n.jsx)("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"16px",border:"1px solid lightgray"},children:C?"No results.":0===Object.keys(v).length?(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(h.Z,{color:"#123abc",loading:!0,size:20}),(0,n.jsx)("span",{style:{marginLeft:"5px"},children:"Loading..."})]}):Object.entries(v).map(e=>{let[s,t]=e,l=JSON.stringify(t,null,2),a=m().highlight(l,m().languages.json,"json");return(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsxs)("span",{children:[s,":"]}),(0,n.jsx)("pre",{dangerouslySetInnerHTML:{__html:a},style:{margin:"0 0 0 10px"}})]},s)})})})]})})]})}t(1209),t(7613),s.default=()=>(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(f,{})})},5815:function(e,s,t){"use strict";t.d(s,{z:function(){return c}});var n=t(3827),l=t(585),a=t(8886),i=t(5479);let c=[{accessorKey:"label",header:e=>{let{column:s}=e;return(0,n.jsxs)(a.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Name",(0,n.jsx)(l.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:s,getValue:t}=e;return(0,n.jsxs)("div",{className:"".concat(s.getCanExpand()?"":"ml-4"),children:[t()," ",s.getCanExpand()?(0,n.jsx)("button",{onClick:s.getToggleExpandedHandler(),style:{cursor:"pointer"},children:s.getIsExpanded()?"\uD83D\uDC47":"\uD83D\uDC49"}):""]})}},{accessorKey:"status",header:e=>{let{column:s}=e;return(0,n.jsxs)(a.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Status",(0,n.jsx)(l.Z,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:s}=e;if(s.original){let e="HEALTHY"===s.original.status?"default":"destructive";return(0,n.jsx)(i.C,{variant:e,children:s.original.status})}return null}},{accessorKey:"checked",header:e=>{let{column:s}=e;return(0,n.jsxs)(a.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Last checked",(0,n.jsx)(l.Z,{className:"ml-2 h-4 w-4"})]})}}]},6162:function(e,s,t){"use strict";t.d(s,{D:function(){return n},k:function(){return l}});let n=!0,l=!1}},function(e){e.O(0,[310,285,694,640,267,411,971,69,744],function(){return e(e.s=9476)}),_N_E=e.O()}]);